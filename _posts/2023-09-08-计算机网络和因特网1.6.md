---
layout: post
title: 1.6 分组延时、丢失和吞吐量
subtitle: 计网笔记
author: NightSheep
categories: 计网笔记
tags: [笔记,计网]
---
## 分组延时和丢失
---

### 分组延时和丢失的发生原因

- 在路由器缓冲区的分组队列
	- 分组到达链路的速率超过了链路输出的能力
	- 分组等待排到队头、被传输

### 四种分组延时

1. 节点处理延时
	- 检查bit级差错
	- 检查分组首部和决定将分组导向何处
2. 排队延时
	- 在输出链路上等待传输的时间
	- 依赖于路由器的拥塞程度
3. 传输延时
	- R=链路带宽
	- L=分组长度
	- 将分组发送到链路上的时间L/R
	- 本质是存储转发延时
4. 传播延时
	- d=物理链路的长度
	- s=在媒体上的传播速度
	- 传播延时=d/s

### 节点延时：

$$
d_{nodal}=d_{proc}+d_{queue}+d_{trans}+d_{prop}
$$
- $d_{proc}$=处理延时
	- 通常是微秒数量级或更少
- $d_{queue}$=排队延时
	- 取决于拥塞程度
- $d_{trans}$=传输延时
	- =L/R，对低速率的链路而言很大（如拨号），通常为微秒级到毫秒级
- $d_{prop}$=传播延时
	 - 几微米到几百毫秒

### 排队延时

- R=链路带宽（bps）
- L=分组长度（bits）
- a=分组到达队列的平均速率  

- 定义流量强度=La/R
	- 流量强度趋近0：平均排队延时很小
	- 流量强度趋近1：延时变得很大
	- 流量强度大于1：延时趋向无穷大
- **设计系统时流量强度不能大于1！**

### 分组丢失

- 链路的队列缓冲区容量有限
- 当分组到达一个满的队列时，该分组将会丢失
- 丢失的分组可能会被前一个结点或源端系统重传，或者根本不重传

## 吞吐量
---

- **吞吐量：在源端和目标端之间传输的速率（数据量/单位时间）**
	- 瞬间吞吐量：在一个时间点的速率
	- 平均吞吐量：在一个长时间内平均值
 - *一般这里的数据量指有效数据量*

- 端到端平均吞吐=$\mit{min}${$R_1,R_2,\cdots,R_n$}
	- "木桶效应"

- 互联网场景
 ![[Snipaste_2023-09-08_22-01-57.png]]
	 - 每个连接的端到端吞吐量=$\mit{min}${$R_c,R_s,R/10$}
	 - 实际上，$R_c$或者$R_s$通常是瓶颈所在