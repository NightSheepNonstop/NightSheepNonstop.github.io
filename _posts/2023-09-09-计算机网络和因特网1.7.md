---
layout: post
title: 1.7 协议层次及服务模型
subtitle: 计网笔记
author: NightSheep
categories: 计网笔记
tags: [笔记,计网]
---
## 协议层次
---

- **网络是一个复杂的系统！**
	- 网络功能繁杂：数字信号的物理信号承载、点到点、路由、rdt、进程区分、应用等
	- 网络有许多构成元素和设备：
		- 主机
		- 路由器
		- 各种媒体的链路
		- 应用
		- 协议
		- 硬件,软件

### 层次化方式实现复杂网络功能

- 将网络复杂的功能分成功能明确的层次，每一层实现了其中一个或一组功能，功能中有其上层可以使用的功能：服务  
	
- 本层协议实体相互交互执行本层的协议动作，目的是实现本层功能，通过接口为上层提供更好的服务  
	
- 在实现本层协议的时候，直接利用了下层所提供的服务  
	
- 本层的服务：借助下层服务实现的本层协议实体之间交互带来的新功能（上层可以利用的）+更下层所提供的服务

### 层次化方式处理的好处

- 概念化：结构清晰，便于标示网络组件，以及描述其相互关系
- 结构化：模块化更易于维护和系统升级
	- 改变某一层服务的实现不影响系统中的其他层次
		- 对于其他层次而言是透明的

## 服务模型
---

### 服务和服务访问点

- 服务( *Service*)：低层实体向上层实体提供它们之间的通信的能力
	- 服务用户
	- 服务提供者

- 原语(*primitive*)：上层使用下层服务的形式，高层使用低层提供的服务，以及低层向高层提供服务都是通过服务访问原语来进行交互的  

- 服务访问点 SAP (*Services Access Point*)：上层使用下层提供的服务通过层间的接口
	- 例子：邮箱
	- 地址(*address*)：下层的一个实体支撑着上层的多个实体SAP有标志不同上层实体的作用
	- 可以有不同的实现，如队列
	- 例子:传输层的SAP:端口(*port*)

### 服务的类型

- **面向连接的服务**
	- 连接：两个通信实体为进行通信而建立的一种结合
	- 面向连接的服务通信的过程：建立连接，通信，拆除连接
	- 面向连接的服务的例子：虚电路
	- 适用范围：适用于大的数据块，不适合小的零星报文
	- 特点：保序
	- 服务类型：
		- 可靠的信息流：传送页面(可靠的获得,通过接收方的确认)
		- 可靠的字节流 ：远程登录
		- 不可靠的连接 ：数字化声音

- **无连接的服务**
	- 无连接服务：两个对等层实体在通信前不需要建立一个连接，不预留资源；不需要通信双方都是活跃的(例：寄信)
	- 特点：不可靠、可能重复、可能失序
	- IP分组，数据包；
	- 适用范围：适合传送零星数据；
	- 服务类型：
		- 不可靠的数据报：电子方式的函件
		- 有确认的数据报：挂号信
		- 请求回答：信息查询

### 服务和协议

- 服务和协议的区别：
	- 服务：低层实体向上层实体提供它们之间的通信的能力，是通过原语来操作的，垂直
	- 协议(*protocol*)：对等层实体(*peer entity*)之间在相互通信的过程中，需要遵循的规则的集合，水平
- 服务和协议的联系：
	- 本层协议的实现要靠下层提供的服务来实现
	- 本层实体通过协议为上层提供更高级的服务

## Internet协议栈
---

- 自顶向下共分为五层
	1. 应用层：网络应用
		- 为人类用户或者其他应用进程提供网络应用服务
		- FTP, SMTP, HTTP,DNS
	 2. 传输层：主机之间的数据传输
		 - 在网络层提供的端到端通信基础上，细分为进程到进程；将不可靠的通信变成可靠的通信
		 - TCP,UDP
	 3. 网络层:为数据报从源到目的选择路由
		 - 主机主机之间的通信，端到端通信，不可靠
		 - IP,路由协议
	4.  链路层:相邻网络节点间的数据传输
		- 2个相邻两点的通信，点到点通信，可靠或不可靠
		- 点对对协议PPP, 802.11(wifi), Ethernet
	 5. 物理层:在线路上传送bit

### ISO/OSI 参考模型

- 如图所示，在互联网协议栈的基础上增加了表示层和会话层
![ISO/OSI参考模型](/assets/images/Snipaste_2023-09-09_17-57-08.png)

- 表示层：允许应用解释传输的数据。例如：加密，压缩，机器相关的表示转换
- 会话层: 数据交换的同步，检查点，恢复

- 互联网协议栈没有这两层，如果需要这些服务的话，必须被应用实现

### 各层次的协议数据单元

- 应用层：报文(*message*)
- 传输层：报文段(*segment*)：TCP段，UDP数据报
- 网络层：分组*packet*（如果无连接方式：数据报*datagram*）
- 数据链路层：帧(*frame*)
- 物理层：位(*bit*)


